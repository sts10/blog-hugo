<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>JavaScript Prototypes: The Basic Basics</title>
  
  <meta name="author" content=""/>
  <meta name="generator" content="Hugo 0.19" />
  

  <link rel="alternate" href="http://example.org/index.xml" type="application/rss+xml" title="Prevent Default">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="http://example.org//css/main.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="http://example.org//css/pygment_highlights.css" />
  <link rel="stylesheet" href="http://example.org//css/highlight.min.css" />

  
  
 
  
    <meta property="og:title" content="JavaScript Prototypes: The Basic Basics" />
  

  
    <meta property="og:description" content="I was always understood JavaScript as a functional programming language, but it turns out there are in fact ways to create basic objects and even &ldquo;object factories&rdquo; (what Rubyists know as Classes).
To better understand how to use objects in JavaScript, I ordered two books: Speaking JavaScript by Dr. Axel Rauschmayer and Pro JavaScript Design Patterns by Ross Harmes and Dustin Diaz. (I know the more canonical choice would have been JavaScript: The Good Parts, but a Flatiron T.">
  

  <meta property="og:type" content="website" />

  
    <meta property="og:url" content="http://example.org/post/2014-05-16-javascript-prototypes-the-basic-basics/" />
    <link rel="canonical" href="http://example.org/post/2014-05-16-javascript-prototypes-the-basic-basics/" />
  

  
  
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
    <meta name="twitter:title" content="JavaScript Prototypes: The Basic Basics" />
  

  
    <meta name="twitter:description" content="I was always understood JavaScript as a functional programming language, but it turns out there are in fact ways to create basic objects and even &ldquo;object factories&rdquo; (what Rubyists know as Classes).
To better understand how to use objects in JavaScript, I ordered two books: Speaking JavaScript by Dr. Axel Rauschmayer and Pro JavaScript Design Patterns by Ross Harmes and Dustin Diaz. (I know the more canonical choice would have been JavaScript: The Good Parts, but a Flatiron T.">
  

   

</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://example.org/">Prevent Default</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>



    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>JavaScript Prototypes: The Basic Basics</h1>
                
                
                  <span class="post-meta">Posted on May 16, 2014</span>
                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    <div class="container" role="main">
      
        <div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>I was always understood JavaScript as a functional programming language, but it turns out there are in fact ways to create basic objects and even &ldquo;object factories&rdquo; (what Rubyists know as Classes).</p>

<p>To better understand how to use objects in JavaScript, I ordered two books: <a href="http://www.amazon.com/Speaking-JavaScript-Axel-Rauschmayer/dp/1449365035/ref=sr_1_1?ie=UTF8&amp;qid=1400259368&amp;sr=8-1&amp;keywords=speaking+javascript"><em>Speaking JavaScript</em> by Dr. Axel Rauschmayer</a> and <a href="http://www.amazon.com/Pro-JavaScript-Design-Patterns-Object-Oriented/dp/159059908X/ref=sr_1_1?ie=UTF8&amp;qid=1400259393&amp;sr=8-1&amp;keywords=pro+javascript+design+patterns"><em>Pro JavaScript Design Patterns</em> by Ross Harmes and Dustin Diaz</a>. (I know the more canonical choice would have been <em>JavaScript: The Good Parts</em>, but a Flatiron T.A. pointed me to <em>Speaking</em> as a more up-to-date alternative.)</p>

<!-- more -->

<p>I went in to this little adventure assuming JavaScript would be much less intuitive than Ruby, and that I&rsquo;d mostly be learning an entirely different system than Ruby thanks to its many quirks. But now that I&rsquo;m about halfway through <em>Speaking</em> I&rsquo;m realizing JavaScript isn&rsquo;t so messy! In fact, given how much it can do, it&rsquo;s not so bad.</p>

<p>Here&rsquo;s Rauschmayer on the question of whether JavaScript is elegant:</p>

<blockquote>
<p>Yes and no. I&rsquo;ve written fair amounts of code in several programming languages from different paradigms. Therefore, I&rsquo;m well aware that JavaScript isn&rsquo;t the pinnacle of elegance. However, it is a very flexible language has a reasonably elegant core, and enables you to use a mixture of object-oriented programming and functional programming.</p>
</blockquote>

<p>In this blog post I&rsquo;ll explore the very basics of object-oriented JavaScript, since that aspect of the language is new to me. There may be some mistakes&ndash; I&rsquo;m new to this pattern (if you see anything incorrect or weird please <a href="http://samschlinkert.com/#contact">shoot me a note!</a>). All 3 code examples are <a href="https://github.com/sts10/animal_prototype">up on GitHub</a>.</p>

<p>I&rsquo;m going to lay out a basic Animal prototype (like a Ruby class) with variables and methods, then create two instances of it. This &ldquo;prototype&rdquo; (lowercase &lsquo;p&rsquo;) pattern seems to be just one way or <em>pattern</em> of creating an &ldquo;object factory&rdquo; in JavaScript. Maybe there&rsquo;s a better or more Ruby-like alternative, but this way seems to work and makes sense to me so let&rsquo;s run with it at least for today.</p>

<h3 id="creating-a-prototype-in-javascript">Creating a Prototype in JavaScript</h3>

<p>This sample code is broken into two parts: the prototype&rsquo;s definition and the instantiation of the prototype and manipulation of those instances.</p>

<pre><code class="language-javascript">var Animal = function (name, type, sound) {  
  this.name = name;
  this.type = type;
  this.sound = sound;
};

Animal.prototype = {
  makeNoise: function () {
    return this.sound + &quot; is the sound that &quot; + this.name + &quot; makes!&quot;;
  },
  getWeightAtAge: function(age) {
    if (this.type === &quot;dog&quot;){
      return 5 * age;
    } else if (this.type == &quot;fish&quot;){
      return 2 * age;
    } else {
      return age;
    }
  },
  toString: function () {
    return this.name + &quot; is a &quot; + this.type;
  }
  
}
</code></pre>

<p>OK, let&rsquo;s start at the top. I define a new <code>var</code> called <code>Animal</code> and set it equal to function that has no name and takes three parameters <code>(name, type, sound)</code>.</p>

<h3 id="aside-about-creating-javascript-functions-in-general">Aside About Creating JavaScript Functions in General</h3>

<p>This is just one of three ways to create a function in JavaScript&ndash; it&rsquo;s called a &ldquo;function expression&rdquo;. (Notice the semi-colon after the closing curly-brace.)</p>

<p>Alternatively, we could create this Animal function via a function declaration, which would look like:</p>

<pre><code class="language-javascript">function Animal (name, type, sound) { 
  this.name = name;
  this.type = type;
  this.sound = sound;
}
</code></pre>

<p>There are advantages to both, but Rauschmayer lists two advantages of declarations: they are &ldquo;hoisted&rdquo; to the top of the scope (so you can call a function before declaring it if you&rsquo;re in the same scope) and they by definition are named.</p>

<p>But we&rsquo;re going to go with the function expression for now.</p>

<h3 id="back-to-our-prototype-definition">Back to our Prototype Definition</h3>

<p>This <code>Animal</code> function will serve a specific purpose for us. It&rsquo;s basically the initializing method of our prototype. New instances of <code>Animal</code> will take in 3 arguments, and then we set them equal to <code>this.name</code>, <code>this.type</code>, and <code>this.sound</code> so that we can use them later.</p>

<p>Here is what, in my mind, would be the Ruby equivalent:</p>

<pre><code class="language-ruby">def initialize(name, type, sound)
  self.name = name
  self.type = type
  self.sound = sound
end 
</code></pre>

<p>The only big difference here, besides the use of <code>this</code> rather than <code>self</code>, is that in JavaScript this initializing function goes outside of the prototype definition, as opposed to Ruby where it goes within the Class definition. Kind of strange/counter-intuitive, but not so crazy.</p>

<p>Next we open up the Animal prototype and define three methods (functions that belong to instances of the object).</p>

<pre><code class="language-javascript">Animal.prototype = {
  makeNoise: function () {
    return this.sound + &quot; is the sound that &quot; + this.name + &quot; makes!&quot;;
  },
  getWeightAtAge: function(age) {
    if (this.type === &quot;dog&quot;){
      return 5 * age;
    } else if (this.type == &quot;fish&quot;){
      return 2 * age;
    } else {
      return age;
    }
  },
  toString: function () {
    return this.name + &quot; is a &quot; + this.type;
  }
  
}
</code></pre>

<p>The above pattern is very similar to the pattern of defining an &ldquo;object literal&rdquo;. An object literal is a basic object&ndash; it&rsquo;s not a factory for objects, it&rsquo;s just one, single object.</p>

<h3 id="what-is-a-javascript-object-anyway">What is a JavaScript Object, Anyway?</h3>

<p>Let&rsquo;s go back to the basics here. From Rauschmayer, chapter 17:</p>

<blockquote>
<p>Roughly, all objects in JavaScript are maps (dictionaries) from strings to values. A (key, value) entry in an object is called a <em>property</em>. The key of a property is always a text string. The value of a property can be any JavaScript value, including a function. <em>Methods</em> are properties whose values are functions.</p>
</blockquote>

<p>So basically they&rsquo;re kind of like Ruby hashes that can hold functions as values. Oh and JavaScript doesn&rsquo;t have the equivalent of Ruby symbols, so we roll with strings as keys.</p>

<h3 id="quick-example-of-an-object-literal-in-javascript">Quick Example of an Object Literal in JavaScript</h3>

<p>Again, an object literal seems to be the simplest type of JavaScript object, so let&rsquo;s take a look at one. Remember, it&rsquo;s not a factory for object, it&rsquo;s just one, single object.</p>

<pre><code class="language-javascript">var sam = {
  name: &quot;Sam&quot;,

  introduce: function(){
    return &quot;Hi, my name is &quot; + this.name;
  }
}
</code></pre>

<p><code>introduce</code> is a method on the object <code>sam</code>. So when we call <code>print(sam.introduce());</code> we get <code>Hi, my name is Sam</code>. (Note: we can also call <code>sam.name</code> and even reset <code>sam.name</code> by running <code>sam.name = &quot;Theodore&quot;</code> outside of the <code>var sam</code> definition). This shows a key difference between JavaScript and Ruby&ndash; we don&rsquo;t need to specify if a variable should be readable or writable via <code>attr_reader</code>, <code>attr_writer</code>, or <code>attr_accessor</code>. <code>sam.name</code> just works.</p>

<p>Of course we can not instantiate new instances of <code>sam</code>&ndash; it&rsquo;s just a single object. For that &ldquo;factory&rdquo; feature, let&rsquo;s return to the prototype.</p>

<p>Now that we&rsquo;ve (1) taken in three variables on initialization and (2) declared 3 methods (instance methods in Ruby-speak), we&rsquo;re ready to make some Animal instances and see what they can do.</p>

<pre><code class="language-javascript">var ziggy = new Animal(&quot;Ziggy&quot;, &quot;dog&quot;, &quot;Woof!&quot;);
var nemo = new Animal(&quot;Nemo&quot;, &quot;fish&quot;, &quot;bubble!&quot;);

print(ziggy.name + &quot; is a &quot; + ziggy.type + &quot; and makes the sound &quot; + ziggy.sound);

print(ziggy.makeNoise());
print(nemo.makeNoise());

print(nemo.toString());

print(&quot;When &quot; + ziggy.name + &quot; is 7 she'll be &quot; + ziggy.getWeightAtAge(7) + &quot; pounds!&quot;);

print(&quot;Setting Nemo's type to shark...&quot;);
nemo.type = &quot;shark&quot;;
print(&quot;Now &quot; + nemo.name + &quot; is a &quot; + nemo.type);
</code></pre>

<h3 id="a-quick-note-on-how-to-actually-run-this-code">A Quick Note on How to Actually Run This Code</h3>

<p>As you can see I&rsquo;m using the <code>print</code> function to display information to the screen. That&rsquo;s because I&rsquo;m using the <a href="https://github.com/v8/v8">V8 JavaScript engine</a> via my command line to run these JavaScript programs. to do that I just run <code>v8 app.js</code> from the Terminal. I wish I remembered how I installed it or if I even needed to install it on my Mac, but here is what looks like some <a href="https://code.google.com/p/v8/wiki/UsingGit">good installation instructions from Google</a>.</p>

<h3 id="back-to-the-animals">Back to the Animals</h3>

<p>Instantiating a new <code>Animal</code> is pretty simple: <code>var ziggy = new Animal(&quot;Ziggy&quot;, &quot;dog&quot;, &quot;Woof!&quot;);</code> (Ziggy is the name of our first family dog). I go on to test methods like <code>ziggy.sound</code> and <code>nemo.toString()</code> and they work just as expected.</p>

<p>Methods can take arguments if they accept parameters, as we can see by the call to <code>getWeightAtAge(7)</code>. And we can even write over variables with <code>nemo.type = &quot;shark&quot;;</code>.</p>

<h3 id="all-together-with-its-ruby-equivalent">All Together, With Its Ruby Equivalent</h3>

<p>Now let&rsquo;s look at the full code in JavaScript:</p>

<pre><code class="language-javascript">var Animal = function (name, type, sound) {  // this could also be `function Animal (name, type, sound) { ` 
  this.name = name;
  this.type = type;
  this.sound = sound;
};

Animal.prototype = {
  makeNoise: function () {
    return this.sound + &quot; is the sound that &quot; + this.name + &quot; makes!&quot;;
  },
  getWeightAtAge: function(age) {
    if (this.type === &quot;dog&quot;){
      return 5 * age;
    } else if (this.type == &quot;fish&quot;){
      return 2 * age;
    } else {
      return age;
    }
  },
  toString: function () {
    return this.name + &quot; is a &quot; + this.type;
  }
  
}


var ziggy = new Animal(&quot;Ziggy&quot;, &quot;dog&quot;, &quot;Woof!&quot;);
var nemo = new Animal(&quot;Nemo&quot;, &quot;fish&quot;, &quot;bubble!&quot;);

print(ziggy.name + &quot; is a &quot; + ziggy.type + &quot; and makes the sound &quot; + ziggy.sound);

print(ziggy.makeNoise());
print(nemo.makeNoise());

print(nemo.toString());

print(&quot;When &quot; + ziggy.name + &quot; is 7 she'll be &quot; + ziggy.getWeightAtAge(7) + &quot; pounds!&quot;);

print(&quot;Setting Nemo's type to shark...&quot;);
nemo.type = &quot;shark&quot;;
print(&quot;Now &quot; + nemo.name + &quot; is a &quot; + nemo.type);

</code></pre>

<p>And here&rsquo;s how I would do the same thing in Ruby:</p>

<pre><code class="language-ruby">class Animal 
  attr_accessor :name, :type, :sound

  def initialize(name, type, sound)
    self.name = name
    self.type = type
    self.sound = sound
  end 

  def make_noise
    &quot;#{self.sound} is the sound that #{self.name} makes.&quot;
  end

  def get_weight_at_age(age)
    if self.type == &quot;dog&quot;
      5 * age
    elsif self.type == &quot;fish&quot;
      2 * age
    else 
      age
    end
  end

  def to_s
    &quot;#{self.name} is a #{self.type}&quot;
  end 

end 

ziggy = Animal.new(&quot;Ziggy&quot;, &quot;dog&quot;, &quot;Woof!&quot;)
nemo = Animal.new(&quot;Nemo&quot;, &quot;fish&quot;, &quot;bubble!&quot;)

puts ziggy.name + &quot; is a &quot; + ziggy.type + &quot; and makes the sound &quot; + ziggy.sound
puts ziggy.make_noise
puts nemo.make_noise

puts nemo.to_s

puts &quot;When &quot; + ziggy.name + &quot; is 7 she'll be &quot; + ziggy.get_weight_at_age(7).to_s + &quot; pounds!&quot;

puts &quot;Setting Nemo's type to shark...&quot;
nemo.type = &quot;shark&quot;;
puts &quot;Now &quot; + nemo.name + &quot; is a &quot; + nemo.type

</code></pre>

<h3 id="differences-of-note">Differences of Note</h3>

<p>I was surprised how similar the programs turned out to be. Small differences: (1) More necessary punctuation (mostly parenthesis and semi-colons) in the JavaScript, (2) explicit returns in JavaScript.</p>

<p>Some larger things I ran into to:</p>

<p>(1) In the JavaScript version, the result of <code>ziggy.getWeightAtAge(7)</code> was coerced into a string because I was calling it within a string with a <code>print</code>. In Ruby I had to use the <code>.to_s</code> method on the result of the <code>get_weight_at_age</code> method to avoid an error.</p>

<p>(2) As I mentioned above, in JavaScript the &ldquo;initializing&rdquo; function goes outside of the prototype definition, whereas in Ruby there&rsquo;s the pretty-intuitive <code>def initialize</code>. As much as I struggle to spell &ldquo;initialize&rdquo; correctly almost every time I declare a new class, I&rsquo;ll give a point to Ruby here for semantics.</p>

<p>(3) In Ruby we have control of which variables are accessible outside of the class definition and how accessible they are (<code>attr_reader</code> vs. <code>attr_writer</code> vs. <code>attr_accessor</code>). In JavaScript, at least by default, all initialized variables are available and over-writable outside of the prototype definition, as if they had been declared <code>attr_accessor</code>s in Ruby.</p>

<p>(4) In JavaScript the method definitions are separated by commas, which kind of sucks if you&rsquo;re re-ordering them often. But again, nothing crazy.</p>

<p>Again, here&rsquo;s all of the code <a href="https://github.com/sts10/animal_prototype">on GitHub</a>.</p>

      </article>

      <ul class="pager blog-pager">
        
          <li class="previous">
            <a href="http://example.org/post/2014-05-04-test-driven-project-euler/" data-toggle="tooltip" data-placement="top" title="Exploring Project Euler Problem #9">&larr; Previous Post</a>
          </li>
        
        
          <li class="next">
            <a href="http://example.org/post/2014-05-21-interactive-score-card/" data-toggle="tooltip" data-placement="top" title="Interactive Score Card">Next Post &rarr;</a>
          </li>
        
      </ul>

      

    </div>
  </div>
</div>

      
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          
          &nbsp;&bull;&nbsp;
          2017

          
            &nbsp;&bull;&nbsp;
            <a href="http://example.org/">Prevent Default</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.19</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="http://example.org//js/main.js"></script>
<script src="http://example.org//js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> renderMathInElement(document.body); </script>








  </body>
</html>
